<!DOCTYPE html>
<html lang="en" xmlns:v-bind="http://www.w3.org/1999/xhtml" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>IT Norge</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/popover.css">
    <link rel="stylesheet" type="text/css" href="/css/pretty-checkbox.min.css">
</head>
<body>

<div id="app">
    <nav class="navbar navbar-inverse">
        <div class="container-fluid-nav">
            <div class="navbar-header">
                <a v-on:click="initStatistics()" id="phome" class="navbar-brand">ITNorge</a>
            </div>
            <ul class="nav navbar-nav">
                <li><a v-on:click="initStatistics()">Statistikk</a></li>
                <li><a v-on:click="initBusinesses()">Selskaper</a></li>
            </ul>
        </div>
    </nav>
    <div v-if="page=='statistics'">
        <div class="pop-box keyword-group not-selected-keywords">
            <div class="search"><input placeholder="Søk i teknologier" v-on:keyup.enter="addKeywords" type="text"
                                       v-model="searchKeywords"></div>
            <div v-for="k in keywordsPlain"
                 v-if="!selectedKeys.includes(k) && (searchKeywords=='' || k.toLowerCase().includes(searchKeywords.toLowerCase()))"
                 class="w3-animate-right keyword not-selected-keyword item">
                <label class="unselectable">{{k}}<input type="checkbox" v-model="selectedKeys" v-bind:value="k"></label>
            </div>
        </div>
        <div v-if="selectedKeys.length" class="pop-box keyword-group selected-keywords">
            <button class="clear-button" v-on:click="clearKeywords">Fjern alle</button>
            <div class="w3-animate-right keyword selected-keyword" v-for="k in selectedKeys">
                <label class="unselectable">{{k}}<input type="checkbox" v-model="selectedKeys" v-bind:value="k"></label>
            </div>
        </div>
        <div class="pop-box linechart-options">

            <p-check class="p-switch p-fill" v-on:change="(loadedKeywords=[],updateLineChart())"
                     v-model="lineChartOptions.onlyKeyedAds.value"
                     v-tooltip="lineChartOptions.onlyKeyedAds.tooltip">{{lineChartOptions.onlyKeyedAds.label}}
            </p-check>
            <p-radio :key="d.value" v-for="d in lineChartOptions.dataset"
                     v-model="lineChartOptions.selectedDataset" :value="d">
                {{d.label}}
            </p-radio>
        </div>
        <div class="pop-box">
            <line-chart :library="lineChartOptions.library" v-bind:suffix="lineChartOptions.selectedDataset.suffix"
                        xtitle="År" v-bind:ytitle="lineChartOptions.selectedDataset.axisTitle" height="600px"
                        :data="loadedKeywords"></line-chart>
        </div>
    </div>


    <div v-if="page=='businesses'">
        <div class="pop-box keyword-group not-selected-keywords">
            <div class="search"><input placeholder="Søk i teknologier" v-on:keyup.enter="addKeywords" type="text"
                                       v-model="searchKeywords"></div>
            <div v-for="k in keywordsPlain"
                 v-if="!bp.keywords.includes(k) && (searchKeywords=='' || k.toLowerCase().includes(searchKeywords.toLowerCase()))"
                 class="w3-animate-right keyword not-selected-keyword item">
                <label class="unselectable">{{k}}<input type="checkbox" v-model="bp.keywords" v-bind:value="k"></label>
            </div>
        </div>
        <div v-if="bp.keywords.length" class="pop-box keyword-group selected-keywords">
            <button class="clear-button" v-on:click="clearKeywords">Fjern alle</button>
            <div class="w3-animate-right keyword selected-keyword" v-for="k in bp.keywords">
                <label class="unselectable">{{k}}<input type="checkbox" v-model="bp.keywords" v-bind:value="k"></label>
            </div>
        </div>
        <div class="pop-box">
            <div class="search">
                <input v-model="bp.search" class="search" v-on:keydown.enter="updateBusinesses(true)"
                       v-on:blur="updateBusinesses(true)" placeholder="Søk i bedrifter" type="text">
                <div class="an-slider">
                    <label style="display:block">Antall annonser</label>
                    <vue-slider v-model="bp.posted" v-bind="sliderProps" :value="[1,maxPosted]" :max="maxPosted"
                                ref="slider"></vue-slider>
                </div>
                <p-check class="p-switch p-fill" @change="updateBusinesses(true)" v-model="bp.groupCompanies">Grupper
                    datterselskaper
                </p-check>
            </div>

        </div>
        <div class="pop-box">
            <h1> Selskaper </h1>
            <div class="pop-box" v-for="b in bp.loaded">
                <div>
                    <p v-for="name in b.business_names">{{name}}</p>
                </div>
                <p>Antall stillingannonser: {{b.ads_posted}}</p>
                <p class="keyword" v-for="k in b.keywords">{{k}}</p>
            </div>
            <div class="pop-box" v-if="bp.noResult"><p>Fant ingen selskaper med disse søkekriteriene..</p></div>
            <div class="pop-box loader" v-if="loading"><img id="loader-img" src="/img/loader.gif">
                <p>Loading..</p></div>
        </div>
    </div>

</div>
<footer class="footer">
    <div class="footer-container">
        <span>Placeholder</span>
    </div>
</footer>
<script src="/js/dist/main.js"></script>
</body>
</html>